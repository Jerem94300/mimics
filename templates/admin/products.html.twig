{% extends 'base.admin.html.twig' %}


{% block title %}Admin Mimics | Produits
{% endblock %}

{% block body %}
	<style>
		.modal-backdrop {
			z-index: 1 !important;
		}

		.img_product {
			width: 80px !important;
			height: auto !important;
		}
	</style>

	<div class="container">
		{% for label, messages in app.flashes(['success', 'danger']) %}
			{% for message in messages %}
				<div class="bg-{{ label }} text-white p-3 mb-3">
					{{ message|raw }}
				</div>
			{% endfor %}
		{% endfor %}
		<div>
			<h2 class="my-4 fs-3">Liste des produits</h2>

			<table class="table vertical-align: middle table-striped text-center align-item-center">
				<thead>
					<tr>
						<th class="text-center">Image</th>
						<th class="text-center">Reference</th>
						<th class="text-center">Titre</th>
						<th class="text-center">Description</th>
						<th class="text-center">Catégorie</th>
						<th class="text-center">prix</th>
						<th class="text-center">Stock</th>
						<th class="text-center">Action</th>
					</tr>
				</thead>
				<tbody>
					{% for item in dbProduct %}
						{# {{ dump(item) }} #}
						<tr>
							<td>
								<img src="{{ asset('uploads/images/' ~ item.picture) }}" class="img-fluid img-thumbnail img_product" alt=""></td>
							<td class="text-center">{{ item.reference }}</td>
							<td class="text-center">{{ item.title }}</td>
							<td class="text-center">{{ item.description }}</td>
							<td class="text-center">{{ item.category.title }}</td>
							<td class="text-center">{{ item.price }}
								€</td>
							<td class="text-center">{{ item.stock }}</td>


							<td class="d-flex gap-2 justify-content-center align-item-center">
								<a href="{{ path('app_admin_product_update', {'id': item.id}) }}" class="btn btn-primary ">
									<i class="fa-solid fa-pen "></i>
								</a>
								<a href="" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#product-{{ item.id }}">
									<i class="fa-solid fa-trash"></i>
								</a>

							</td>

							<!-- Modal -->
							<div class="modal fade" id="product-{{ item.id }}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="exampleModalLabel">Produit :
												<strong>{{item.title }}</strong>
											</h5>
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">
											Voulez-vous supprimer ce produit?
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
											<a href="{{ path('app_admin_category_remove', {'id': item.id}) }}" class="btn btn-primary">Supprimer</a>
										</div>
									</div>
								</div>
							</div>

						</tr>
					{% endfor %}
				</tbody>

			</table>

		</div>


		<h2 class="my-4 fs-3">Ajouter ou modifier un produit</h2>

		{{ form_start(productForm) }}
		{{ form_row(productForm.reference) }}
		{{ form_row(productForm.title) }}
		{{ form_row(productForm.category) }}
		{{ form_row(productForm.size) }}
		{{ form_row(productForm.color) }}
		{{ form_row(productForm.gender) }}
		{{ form_row(productForm.description) }}
		{{ form_row(productForm.price) }}
		{{ form_row(productForm.stock) }}
		{{ form_row(productForm.picture) }}
		{% if pictureFile is not null %}
			<img src="{{ asset('uploads/images/' ~ pictureFile) }}" class="img_product" alt="">

		{% endif %}


		<button type="submit" class="btn btn-dark">Enregistrer</button>
		{{ form_end(productForm) }}
	</tr>
</div></tbody></div>{% endblock %}
